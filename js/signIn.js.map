{"version":3,"sources":["../../../src/UI/js/signIn.js"],"names":["form","document","querySelector","spinner","alert","userData","email","password","handleInputChange","e","name","value","target","showAlert","msg","classList","remove","innerHTML","setTimeout","add","handleSubmit","preventDefault","config","method","body","JSON","stringify","headers","res","fetch","error","data","json","localStorage","setItem","is_admin","regex","RegExp","reponame","window","location","href","split","host","match","replace","repoName","Object","values","onsubmit","addEventListener"],"mappings":"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","sourcesContent":["/* global document fetch localStorage window  */\nconst form = document.querySelector('.form');\nconst spinner = document.querySelector('.spinner');\nconst alert = document.querySelector('.alert');\n\nlet userData = {\n  email: '',\n  password: '',\n};\n// handles form inputs\nconst handleInputChange = (e) => {\n  const { name, value } = e.target;\n  userData = { ...userData, [name]: value };\n};\n\n// shows alert\nconst showAlert = (msg) => {\n  alert.classList.remove('hide');\n  alert.innerHTML = ` <i class=\"fas fa-info-circle\"></i> ${msg}`;\n  setTimeout(() => alert.classList.add('hide'), 5000);\n};\n\n// Handle form submit\nconst handleSubmit = async (e) => {\n  e.preventDefault();\n  spinner.classList.remove('hide');\n  try {\n    const config = {\n      method: 'POST',\n      body: JSON.stringify(userData),\n      headers: { 'Content-Type': 'application/json' },\n    };\n    const res = await fetch('https://auto-mart-ng.herokuapp.com/api/v1/auth/signin', config);\n    const { error, data } = await res.json();\n    if (data) {\n      spinner.classList.add('hide');\n      localStorage.setItem('user', JSON.stringify(data));\n      if (data.is_admin) {\n        const regex = new RegExp('github.io', 'gi');\n        const reponame = window.location.href.split('/')[3];\n        if (window.location.host.match(regex)) {\n          window.location.replace(`/${reponame}/admin-dashboard.html`);\n        } else {\n          window.location.replace('/admin-dashboard.html');\n        }\n      } else {\n        const regex = new RegExp('github.io', 'gi');\n        const repoName = window.location.href.split('/')[3];\n        if (window.location.host.match(regex)) {\n          window.location.replace(`/${repoName}/dashboard.html`);\n        } else {\n          window.location.replace('/dashboard.html');\n        }\n      }\n    }\n    if (error) {\n      spinner.classList.add('hide');\n      // error might be an object or string\n      if (typeof error === 'object') {\n        showAlert(Object.values(error));\n      } else {\n        showAlert(error);\n      }\n    }\n  } catch (error) {\n    spinner.classList.add('hide');\n    showAlert('Network Error');\n  }\n};\n// pass form submit event\nform.onsubmit = e => handleSubmit(e);\n\n// Add change event to inputes\ndocument.querySelector('input[name=email]').addEventListener('change', e => handleInputChange(e));\ndocument.querySelector('input[name=password]').addEventListener('change', e => handleInputChange(e));\n"],"file":"signIn.js"}